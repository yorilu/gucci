{"ast":null,"code":"\"use strict\";\n\nvar _classCallCheck = require(\"@babel/runtime/helpers/classCallCheck\");\nvar _createClass = require(\"@babel/runtime/helpers/createClass\");\nvar _inherits = require(\"@babel/runtime/helpers/inherits\");\nvar _possibleConstructorReturn = require(\"@babel/runtime/helpers/possibleConstructorReturn\");\nvar _getPrototypeOf = require(\"@babel/runtime/helpers/getPrototypeOf\");\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function get() {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PopoverController = void 0;\nvar PropTypes = __importStar(require(\"prop-types\"));\nvar React = __importStar(require(\"react\"));\nvar react_native_1 = require(\"react-native-web/dist/index\");\nvar PopoverController = function (_React$PureComponent) {\n  _inherits(PopoverController, _React$PureComponent);\n  var _super = _createSuper(PopoverController);\n  function PopoverController() {\n    var _this;\n    _classCallCheck(this, PopoverController);\n    _this = _super.apply(this, arguments);\n    _this.state = {\n      showPopover: false,\n      popoverAnchor: {\n        x: 0,\n        y: 0,\n        width: 0,\n        height: 0\n      }\n    };\n    _this.onOrientationChange = function () {\n      if (_this.state.showPopover) {\n        requestAnimationFrame(_this.openPopover);\n      }\n    };\n    _this.touchable = null;\n    _this.setTouchableRef = function (ref) {\n      _this.touchable = ref;\n    };\n    _this.openPopover = function () {\n      var handle = (0, react_native_1.findNodeHandle)(_this.touchable);\n      if (handle) {\n        react_native_1.NativeModules.UIManager.measure(handle, _this.onTouchableMeasured);\n      }\n    };\n    _this.onTouchableMeasured = function (x0, y0, width, height, x, y) {\n      var _a;\n      var dimensions = react_native_1.Dimensions.get('window');\n      _this.setState({\n        showPopover: true,\n        popoverAnchor: {\n          x: react_native_1.I18nManager.isRTL ? dimensions.width - x : x,\n          y: y - (_this.props.calculateStatusBar ? (_a = react_native_1.StatusBar.currentHeight) !== null && _a !== void 0 ? _a : 0 : 0),\n          width: width,\n          height: height\n        }\n      });\n    };\n    _this.closePopover = function () {\n      return _this.setState({\n        showPopover: false\n      });\n    };\n    return _this;\n  }\n  _createClass(PopoverController, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.dimensionsSub = react_native_1.Dimensions.addEventListener('change', this.onOrientationChange);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var _a;\n      (_a = this.dimensionsSub) === null || _a === void 0 ? void 0 : _a.remove();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return this.props.children({\n        openPopover: this.openPopover,\n        closePopover: this.closePopover,\n        setPopoverAnchor: this.setTouchableRef,\n        popoverVisible: this.state.showPopover,\n        popoverAnchorRect: this.state.popoverAnchor\n      });\n    }\n  }]);\n  return PopoverController;\n}(React.PureComponent);\nexports.PopoverController = PopoverController;\nPopoverController.propTypes = {\n  children: PropTypes.func.isRequired\n};","map":{"version":3,"sources":["../src/PopoverController.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PopoverController = void 0;\nconst PropTypes = __importStar(require(\"prop-types\"));\nconst React = __importStar(require(\"react\"));\nconst react_native_1 = require(\"react-native\");\nclass PopoverController extends React.PureComponent {\n    constructor() {\n        super(...arguments);\n        this.state = {\n            showPopover: false,\n            popoverAnchor: { x: 0, y: 0, width: 0, height: 0 },\n        };\n        this.onOrientationChange = () => {\n            if (this.state.showPopover) {\n                requestAnimationFrame(this.openPopover);\n            }\n        };\n        this.touchable = null;\n        this.setTouchableRef = (ref) => {\n            this.touchable = ref;\n        };\n        this.openPopover = () => {\n            const handle = (0, react_native_1.findNodeHandle)(this.touchable);\n            if (handle) {\n                react_native_1.NativeModules.UIManager.measure(handle, this.onTouchableMeasured);\n            }\n        };\n        this.onTouchableMeasured = (x0, y0, width, height, x, y) => {\n            var _a;\n            const dimensions = react_native_1.Dimensions.get('window');\n            this.setState({\n                showPopover: true,\n                popoverAnchor: {\n                    x: react_native_1.I18nManager.isRTL ? dimensions.width - x : x,\n                    y: y -\n                        (this.props.calculateStatusBar ? (_a = react_native_1.StatusBar.currentHeight) !== null && _a !== void 0 ? _a : 0 : 0),\n                    width,\n                    height,\n                },\n            });\n        };\n        this.closePopover = () => this.setState({ showPopover: false });\n    }\n    componentDidMount() {\n        this.dimensionsSub = react_native_1.Dimensions.addEventListener('change', this.onOrientationChange);\n    }\n    componentWillUnmount() {\n        var _a;\n        (_a = this.dimensionsSub) === null || _a === void 0 ? void 0 : _a.remove();\n    }\n    render() {\n        return this.props.children({\n            openPopover: this.openPopover,\n            closePopover: this.closePopover,\n            setPopoverAnchor: this.setTouchableRef,\n            popoverVisible: this.state.showPopover,\n            popoverAnchorRect: this.state.popoverAnchor,\n        });\n    }\n}\nexports.PopoverController = PopoverController;\nPopoverController.propTypes = {\n    children: PropTypes.func.isRequired,\n};\n//# sourceMappingURL=PopoverController.js.map"]},"metadata":{},"sourceType":"script"}