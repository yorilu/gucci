{"ast":null,"code":"\"use strict\";\n\nvar _reactJsxRuntime = require(\"react/jsx-runtime\");\nvar _classCallCheck = require(\"@babel/runtime/helpers/classCallCheck\");\nvar _createClass = require(\"@babel/runtime/helpers/createClass\");\nvar _inherits = require(\"@babel/runtime/helpers/inherits\");\nvar _possibleConstructorReturn = require(\"@babel/runtime/helpers/possibleConstructorReturn\");\nvar _getPrototypeOf = require(\"@babel/runtime/helpers/getPrototypeOf\");\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function get() {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Popover = void 0;\nvar debounce_1 = __importDefault(require(\"lodash/debounce\"));\nvar PropTypes = __importStar(require(\"prop-types\"));\nvar React = __importStar(require(\"react\"));\nvar react_native_1 = require(\"react-native-web/dist/index\");\nvar PopoverGeometry_1 = require(\"./PopoverGeometry\");\nvar styles = react_native_1.StyleSheet.create({\n  container: Object.assign(Object.assign({}, react_native_1.StyleSheet.absoluteFillObject), {\n    opacity: 0,\n    backgroundColor: 'transparent'\n  }),\n  containerVisible: {\n    opacity: 1\n  },\n  background: Object.assign(Object.assign({}, react_native_1.StyleSheet.absoluteFillObject), {\n    backgroundColor: 'rgba(0,0,0,0.5)'\n  }),\n  popover: Object.assign(Object.assign({}, react_native_1.Platform.select({\n    ios: {\n      shadowColor: 'black',\n      shadowOffset: {\n        width: 0,\n        height: 2\n      },\n      shadowRadius: 2,\n      shadowOpacity: 0.4,\n      backgroundColor: 'transparent'\n    }\n  })), {\n    position: 'absolute'\n  }),\n  content: {\n    flexDirection: 'column',\n    position: 'absolute',\n    backgroundColor: '#f2f2f2',\n    padding: 8\n  },\n  arrow: {\n    position: 'absolute',\n    borderTopColor: '#f2f2f2',\n    borderRightColor: 'transparent',\n    borderBottomColor: 'transparent',\n    borderLeftColor: 'transparent'\n  }\n});\nvar ARROW_DEG = {\n  bottom: '-180deg',\n  start: react_native_1.I18nManager.isRTL ? '90deg' : '-90deg',\n  end: react_native_1.I18nManager.isRTL ? '-90deg' : '90deg',\n  top: '0deg'\n};\nvar Popover = function (_React$PureComponent) {\n  _inherits(Popover, _React$PureComponent);\n  var _super = _createSuper(Popover);\n  function Popover(props) {\n    var _this;\n    _classCallCheck(this, Popover);\n    _this = _super.call(this, props);\n    _this.computeGeometry = function (props, contentSize) {\n      return (0, PopoverGeometry_1.computeGeometry)(contentSize || _this.state.contentSize, props.placement, props.fromRect, props.displayArea || _this.defaultDisplayArea, props.arrowSize);\n    };\n    _this.onOrientationChange = function () {\n      var _a;\n      var dimensions = react_native_1.Dimensions.get('window');\n      _this.defaultDisplayArea = {\n        x: 10,\n        y: 10,\n        width: dimensions.width - 20,\n        height: dimensions.height - 20 - (_this.props.calculateStatusBar ? (_a = react_native_1.StatusBar.currentHeight) !== null && _a !== void 0 ? _a : 0 : 0)\n      };\n    };\n    _this.updateState = (0, debounce_1.default)(_this.setState, 100);\n    _this.measureContent = function (_ref) {\n      var _ref$nativeEvent$layo = _ref.nativeEvent.layout,\n        width = _ref$nativeEvent$layo.width,\n        height = _ref$nativeEvent$layo.height;\n      if (width && height) {\n        var contentSize = {\n          width: width,\n          height: height\n        };\n        var geom = _this.computeGeometry(_this.props, contentSize);\n        var isAwaitingShow = _this.state.isAwaitingShow;\n        _this.updateState(Object.assign(Object.assign({}, geom), {\n          contentSize: contentSize\n        }), function () {\n          if (isAwaitingShow) {\n            _this.startAnimation(true);\n          }\n        });\n      }\n    };\n    _this.getTranslateOrigin = function () {\n      var _this$state = _this.state,\n        contentSize = _this$state.contentSize,\n        origin = _this$state.origin,\n        anchor = _this$state.anchor;\n      var popoverCenter = {\n        x: origin.x + contentSize.width / 2,\n        y: origin.y + contentSize.height / 2\n      };\n      return {\n        x: anchor.x - popoverCenter.x,\n        y: anchor.y - popoverCenter.y\n      };\n    };\n    _this.startAnimation = function (show) {\n      var doneCallback = show ? undefined : _this.onHidden;\n      react_native_1.Animated.timing(_this.state.animation, {\n        toValue: show ? 1 : 0,\n        duration: _this.props.duration,\n        easing: _this.props.easing(show),\n        useNativeDriver: !!_this.props.useNativeDriver\n      }).start(doneCallback);\n    };\n    _this.onHidden = function () {\n      return _this.setState({\n        visible: false,\n        isAwaitingShow: false\n      });\n    };\n    _this.computeStyles = function () {\n      var _this$state2 = _this.state,\n        animation = _this$state2.animation,\n        anchor = _this$state2.anchor,\n        origin = _this$state2.origin;\n      var translateOrigin = _this.getTranslateOrigin();\n      var arrowSize = _this.props.arrowSize;\n      var width = arrowSize.width + 2;\n      var height = arrowSize.height * 2 + 2;\n      return {\n        background: [styles.background, _this.props.backgroundStyle, {\n          opacity: animation.interpolate({\n            inputRange: [0, 1],\n            outputRange: [0, 1],\n            extrapolate: 'clamp'\n          })\n        }],\n        arrow: [styles.arrow, _this.props.arrowStyle, {\n          width: width,\n          height: height,\n          borderTopWidth: height / 2,\n          left: anchor.x - origin.x - width / 2,\n          top: anchor.y - origin.y - height / 2,\n          borderEndWidth: width / 2,\n          borderBottomWidth: height / 2,\n          borderStartWidth: width / 2,\n          transform: [{\n            rotate: animation.interpolate({\n              inputRange: [0, 1],\n              outputRange: [ARROW_DEG[_this.state.placement], ARROW_DEG[_this.state.placement]],\n              extrapolate: 'clamp'\n            })\n          }, {\n            scale: animation.interpolate({\n              inputRange: [0, 1],\n              outputRange: [0, 1],\n              extrapolate: 'clamp'\n            })\n          }]\n        }],\n        popover: [styles.popover, _this.props.popoverStyle, {\n          top: origin.y,\n          left: origin.x\n        }],\n        content: [styles.content, _this.props.contentStyle, {\n          transform: [{\n            translateX: animation.interpolate({\n              inputRange: [0, 1],\n              outputRange: [translateOrigin.x, 0],\n              extrapolate: 'clamp'\n            })\n          }, {\n            translateY: animation.interpolate({\n              inputRange: [0, 1],\n              outputRange: [translateOrigin.y, 0],\n              extrapolate: 'clamp'\n            })\n          }, {\n            scale: animation\n          }]\n        }]\n      };\n    };\n    _this.state = {\n      contentSize: {\n        width: 0,\n        height: 0\n      },\n      anchor: {\n        x: 0,\n        y: 0\n      },\n      origin: {\n        x: 0,\n        y: 0\n      },\n      placement: props.placement === 'auto' ? 'top' : props.placement,\n      visible: false,\n      isAwaitingShow: false,\n      animation: new react_native_1.Animated.Value(0)\n    };\n    _this.onOrientationChange();\n    return _this;\n  }\n  _createClass(Popover, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.dimensionsSub = react_native_1.Dimensions.addEventListener('change', this.onOrientationChange);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var _a;\n      (_a = this.dimensionsSub) === null || _a === void 0 ? void 0 : _a.remove();\n    }\n  }, {\n    key: \"UNSAFE_componentWillReceiveProps\",\n    value: function UNSAFE_componentWillReceiveProps(nextProps) {\n      var _this2 = this;\n      var willBeVisible = nextProps.visible;\n      var _this$props = this.props,\n        visible = _this$props.visible,\n        fromRect = _this$props.fromRect,\n        displayArea = _this$props.displayArea;\n      if (willBeVisible !== visible) {\n        if (willBeVisible) {\n          this.setState({\n            contentSize: {\n              width: 0,\n              height: 0\n            },\n            isAwaitingShow: true,\n            visible: true\n          });\n        } else {\n          this.startAnimation(false);\n        }\n      } else if (willBeVisible && (fromRect !== nextProps.fromRect || displayArea !== nextProps.displayArea)) {\n        var geom = this.computeGeometry(nextProps, this.state.contentSize);\n        var isAwaitingShow = this.state.isAwaitingShow;\n        this.setState(Object.assign({}, geom), function () {\n          if (isAwaitingShow) {\n            _this2.startAnimation(true);\n          }\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var visible = this.state.visible;\n      var _this$props2 = this.props,\n        onClose = _this$props2.onClose,\n        onDismiss = _this$props2.onDismiss,\n        supportedOrientations = _this$props2.supportedOrientations;\n      var computedStyles = this.computeStyles();\n      var contentSizeAvailable = this.state.contentSize.width;\n      return _reactJsxRuntime.jsx(react_native_1.Modal, {\n        transparent: true,\n        visible: visible,\n        onRequestClose: onClose,\n        onDismiss: onDismiss,\n        supportedOrientations: supportedOrientations,\n        onOrientationChange: this.onOrientationChange,\n        children: _reactJsxRuntime.jsxs(react_native_1.View, {\n          style: [styles.container, !!contentSizeAvailable && styles.containerVisible],\n          children: [_reactJsxRuntime.jsx(react_native_1.TouchableWithoutFeedback, {\n            onPress: this.props.onClose,\n            children: _reactJsxRuntime.jsx(react_native_1.Animated.View, {\n              style: computedStyles.background\n            })\n          }), _reactJsxRuntime.jsxs(react_native_1.Animated.View, {\n            style: computedStyles.popover,\n            children: [_reactJsxRuntime.jsx(react_native_1.Animated.View, {\n              onLayout: this.measureContent,\n              style: computedStyles.content,\n              children: this.props.children\n            }), _reactJsxRuntime.jsx(react_native_1.Animated.View, {\n              style: computedStyles.arrow\n            })]\n          })]\n        })\n      });\n    }\n  }]);\n  return Popover;\n}(React.PureComponent);\nexports.Popover = Popover;\nPopover.propTypes = {\n  visible: PropTypes.bool,\n  onClose: PropTypes.func,\n  onDismiss: PropTypes.func,\n  arrowSize: PropTypes.shape({\n    x: PropTypes.number,\n    y: PropTypes.number\n  }),\n  placement: PropTypes.oneOf(['left', 'top', 'right', 'bottom', 'auto']),\n  fromRect: PropTypes.shape({\n    x: PropTypes.number,\n    y: PropTypes.number,\n    width: PropTypes.number,\n    height: PropTypes.number\n  }),\n  displayArea: PropTypes.shape({\n    x: PropTypes.number,\n    y: PropTypes.number,\n    width: PropTypes.number,\n    height: PropTypes.number\n  }),\n  backgroundStyle: PropTypes.any,\n  arrowStyle: PropTypes.any,\n  popoverStyle: PropTypes.any,\n  contentStyle: PropTypes.any,\n  duration: PropTypes.number,\n  easing: PropTypes.func\n};\nPopover.defaultProps = {\n  visible: false,\n  onClose: function onClose() {},\n  onDismiss: function onDismiss() {},\n  arrowSize: {\n    width: 16,\n    height: 8\n  },\n  placement: 'auto',\n  duration: 300,\n  easing: function easing(show) {\n    return show ? react_native_1.Easing.out(react_native_1.Easing.back(1.70158)) : react_native_1.Easing.inOut(react_native_1.Easing.quad);\n  },\n  useNativeDriver: false,\n  calculateStatusBar: false\n};\nPopover.displayName = 'Popover';","map":{"version":3,"sources":["../src/Popover.tsx"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAA,UAAA,GAAA,eAAA,CAAA,OAAA,CAAA,iBAAA,CAAA,CAAA;AACA,IAAA,SAAA,GAAA,YAAA,CAAA,OAAA,CAAA,YAAA,CAAA,CAAA;AACA,IAAA,KAAA,GAAA,YAAA,CAAA,OAAA,CAAA,OAAA,CAAA,CAAA;AAA+B;AAgB/B,IAAA,iBAAA,GAAA,OAAA,qBAAA;AAQA,IAAM,MAAM,GAAG,cAAA,CAAA,UAAU,CAAC,MAAM,CAAC;EAC/B,SAAS,EAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,CAAA,CAAA,EACJ,cAAA,CAAA,UAAU,CAAC,kBAAkB,CAAA,EAAA;IAChC,OAAO,EAAE,CAAC;IACV,eAAe,EAAE;EAAa,CAAA,CAC/B;EACD,gBAAgB,EAAE;IAChB,OAAO,EAAE;GACV;EACD,UAAU,EAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,CAAA,CAAA,EACL,cAAA,CAAA,UAAU,CAAC,kBAAkB,CAAA,EAAA;IAChC,eAAe,EAAE;EAAiB,CAAA,CACnC;EACD,OAAO,EAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,CAAA,CAAA,EACF,cAAA,CAAA,QAAQ,CAAC,MAAM,CAAC;IACjB,GAAG,EAAE;MACH,WAAW,EAAE,OAAO;MACpB,YAAY,EAAE;QAAE,KAAK,EAAE,CAAC;QAAE,MAAM,EAAE;MAAC,CAAE;MACrC,YAAY,EAAE,CAAC;MACf,aAAa,EAAE,GAAG;MAClB,eAAe,EAAE;IAClB;GACF,CAAC,CAAA,EAAA;IACF,QAAQ,EAAE;EAAU,CAAA,CACrB;EACD,OAAO,EAAE;IACP,aAAa,EAAE,QAAQ;IACvB,QAAQ,EAAE,UAAU;IACpB,eAAe,EAAE,SAAS;IAC1B,OAAO,EAAE;GACV;EACD,KAAK,EAAE;IACL,QAAQ,EAAE,UAAU;IACpB,cAAc,EAAE,SAAS;IACzB,gBAAgB,EAAE,aAAa;IAC/B,iBAAiB,EAAE,aAAa;IAChC,eAAe,EAAE;EAClB;CACF,CAAC;AAEF,IAAM,SAAS,GAAqC;EAClD,MAAM,EAAE,SAAS;EACjB,KAAK,EAAE,cAAA,CAAA,WAAW,CAAC,KAAK,GAAG,OAAO,GAAG,QAAQ;EAC7C,GAAG,EAAE,cAAA,CAAA,WAAW,CAAC,KAAK,GAAG,QAAQ,GAAG,OAAO;EAC3C,GAAG,EAAE;CACN;AAAC,IA0CW,OAAQ;EAAA;EAAA;EAgDnB,iBAAY,KAAmB,EAAA;IAAA;IAAA;IAC7B,0BAAM,KAAK;IAwBL,MAAA,eAAe,GAAG,UACxB,KAAmB,EACnB,WAAiB;MAAA,OAEjB,CAAA,CAAA,EAAA,iBAAA,CAAA,eAAe,EACb,WAAW,IAAI,MAAK,KAAK,CAAC,WAAW,EACrC,KAAK,CAAC,SAAU,EAChB,KAAK,CAAC,QAAQ,EACd,KAAK,CAAC,WAAW,IAAI,MAAK,kBAAkB,EAC5C,KAAK,CAAC,SAAU,CACjB;IAAA;IAEK,MAAA,mBAAmB,GAAG,YAAK;;MACjC,IAAM,UAAU,GAAG,cAAA,CAAA,UAAU,CAAC,GAAG,CAAC,QAAQ,CAAC;MAC3C,MAAK,kBAAkB,GAAG;QACxB,CAAC,EAAE,EAAE;QACL,CAAC,EAAE,EAAE;QACL,KAAK,EAAE,UAAU,CAAC,KAAK,GAAG,EAAE;QAC5B,MAAM,EACJ,UAAU,CAAC,MAAM,GACjB,EAAE,IACD,MAAK,KAAK,CAAC,kBAAkB,GAAG,CAAA,EAAA,GAAA,cAAA,CAAA,SAAS,CAAC,aAAa,MAAA,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,EAAA,GAAI,CAAC,GAAG,CAAC;OACpE;IACH,CAAC;IAEO,MAAA,WAAW,GAAG,CAAA,CAAA,EAAA,UAAA,CAAA,OAAQ,EAAC,MAAK,QAAQ,EAAE,GAAG,CAAC;IAE1C,MAAA,cAAc,GAAmB,gBAIpC;MAAA,iCAHH,WAAW,CACT,MAAM;QAAI,KAAK,yBAAL,KAAK;QAAE,MAAM,yBAAN,MAAM;MAGzB,IAAI,KAAK,IAAI,MAAM,EAAE;QACnB,IAAM,WAAW,GAAG;UAAE,KAAK,EAAL,KAAK;UAAE,MAAM,EAAN;QAAM,CAAE;QACrC,IAAM,IAAI,GAAG,MAAK,eAAe,CAAC,MAAK,KAAK,EAAE,WAAW,CAAC;QAE1D,IAAM,cAAc,GAAG,MAAK,KAAK,CAAC,cAAc;QAIhD,MAAK,WAAW,CAAC,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,CAAA,CAAA,EAAK,IAAI,CAAA,EAAA;UAAE,WAAW,EAAX;QAAW,CAAA,CAAS,EAAE,YAAK;UAGrD,IAAI,cAAc,EAAE;YAClB,MAAK,cAAc,CAAC,IAAI,CAAC;UAC1B;QACH,CAAC,CAAC;MACH;IACH,CAAC;IAEO,MAAA,kBAAkB,GAAG,YAAK;MAChC,kBAAwC,MAAK,KAAK;QAA1C,WAAW,eAAX,WAAW;QAAE,MAAM,eAAN,MAAM;QAAE,MAAM,eAAN,MAAM;MACnC,IAAM,aAAa,GAAG;QACpB,CAAC,EAAE,MAAM,CAAC,CAAC,GAAG,WAAW,CAAC,KAAK,GAAG,CAAC;QACnC,CAAC,EAAE,MAAM,CAAC,CAAC,GAAG,WAAW,CAAC,MAAM,GAAG;OACpC;MACD,OAAO;QAAE,CAAC,EAAE,MAAM,CAAC,CAAC,GAAG,aAAa,CAAC,CAAC;QAAE,CAAC,EAAE,MAAM,CAAC,CAAC,GAAG,aAAa,CAAC;MAAC,CAAE;IACzE,CAAC;IAmCO,MAAA,cAAc,GAAG,UAAC,IAAa,EAAI;MACzC,IAAM,YAAY,GAAG,IAAI,GAAG,SAAS,GAAG,MAAK,QAAQ;MACrD,cAAA,CAAA,QAAQ,CAAC,MAAM,CAAC,MAAK,KAAK,CAAC,SAAS,EAAE;QACpC,OAAO,EAAE,IAAI,GAAG,CAAC,GAAG,CAAC;QACrB,QAAQ,EAAE,MAAK,KAAK,CAAC,QAAQ;QAC7B,MAAM,EAAE,MAAK,KAAK,CAAC,MAAO,CAAC,IAAI,CAAC;QAChC,eAAe,EAAE,CAAC,CAAC,MAAK,KAAK,CAAC;OAC/B,CAAC,CAAC,KAAK,CAAC,YAAY,CAAC;IACxB,CAAC;IAEO,MAAA,QAAQ,GAAG;MAAA,OACjB,MAAK,QAAQ,CAAC;QAAE,OAAO,EAAE,KAAK;QAAE,cAAc,EAAE;MAAK,CAAE,CAAC;IAAA;IAElD,MAAA,aAAa,GAAG,YAAK;MAC3B,mBAAsC,MAAK,KAAK;QAAxC,SAAS,gBAAT,SAAS;QAAE,MAAM,gBAAN,MAAM;QAAE,MAAM,gBAAN,MAAM;MACjC,IAAM,eAAe,GAAG,MAAK,kBAAkB,EAAE;MACjD,IAAM,SAAS,GAAG,MAAK,KAAK,CAAC,SAAS;MAMtC,IAAM,KAAK,GAAG,SAAU,CAAC,KAAK,GAAG,CAAC;MAClC,IAAM,MAAM,GAAG,SAAU,CAAC,MAAM,GAAG,CAAC,GAAG,CAAC;MAExC,OAAO;QACL,UAAU,EAAE,CACV,MAAM,CAAC,UAAU,EACjB,MAAK,KAAK,CAAC,eAAe,EAC1B;UACE,OAAO,EAAE,SAAS,CAAC,WAAW,CAAC;YAC7B,UAAU,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;YAClB,WAAW,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;YACnB,WAAW,EAAE;WACd;SACF,CACF;QACD,KAAK,EAAE,CACL,MAAM,CAAC,KAAK,EACZ,MAAK,KAAK,CAAC,UAAU,EACrB;UACE,KAAK,EAAL,KAAK;UACL,MAAM,EAAN,MAAM;UACN,cAAc,EAAE,MAAM,GAAG,CAAC;UAC1B,IAAI,EAAE,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,KAAK,GAAG,CAAC;UACrC,GAAG,EAAE,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,MAAM,GAAG,CAAC;UACrC,cAAc,EAAE,KAAK,GAAG,CAAC;UACzB,iBAAiB,EAAE,MAAM,GAAG,CAAC;UAC7B,gBAAgB,EAAE,KAAK,GAAG,CAAC;UAC3B,SAAS,EAAE,CACT;YAEE,MAAM,EAAE,SAAS,CAAC,WAAW,CAAC;cAC5B,UAAU,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;cAClB,WAAW,EAAE,CACX,SAAS,CAAC,MAAK,KAAK,CAAC,SAAS,CAAC,EAC/B,SAAS,CAAC,MAAK,KAAK,CAAC,SAAS,CAAC,CAChC;cACD,WAAW,EAAE;aACd;WACF,EACD;YACE,KAAK,EAAE,SAAS,CAAC,WAAW,CAAC;cAC3B,UAAU,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;cAClB,WAAW,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;cACnB,WAAW,EAAE;aACd;WACF;SAEJ,CACF;QACD,OAAO,EAAE,CACP,MAAM,CAAC,OAAO,EACd,MAAK,KAAK,CAAC,YAAY,EACvB;UAAE,GAAG,EAAE,MAAM,CAAC,CAAC;UAAE,IAAI,EAAE,MAAM,CAAC;QAAC,CAAE,CAClC;QACD,OAAO,EAAE,CACP,MAAM,CAAC,OAAO,EACd,MAAK,KAAK,CAAC,YAAY,EACvB;UACE,SAAS,EAAE,CACT;YACE,UAAU,EAAE,SAAS,CAAC,WAAW,CAAC;cAChC,UAAU,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;cAClB,WAAW,EAAE,CAAC,eAAe,CAAC,CAAC,EAAE,CAAC,CAAC;cACnC,WAAW,EAAE;aACd;WACF,EACD;YACE,UAAU,EAAE,SAAS,CAAC,WAAW,CAAC;cAChC,UAAU,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;cAClB,WAAW,EAAE,CAAC,eAAe,CAAC,CAAC,EAAE,CAAC,CAAC;cACnC,WAAW,EAAE;aACd;WACF,EACD;YAAE,KAAK,EAAE;UAAS,CAAE;SAEvB;OAEJ;IACH,CAAC;IAvNC,MAAK,KAAK,GAAG;MACX,WAAW,EAAE;QAAE,KAAK,EAAE,CAAC;QAAE,MAAM,EAAE;MAAC,CAAE;MACpC,MAAM,EAAE;QAAE,CAAC,EAAE,CAAC;QAAE,CAAC,EAAE;MAAC,CAAE;MACtB,MAAM,EAAE;QAAE,CAAC,EAAE,CAAC;QAAE,CAAC,EAAE;MAAC,CAAE;MACtB,SAAS,EAAE,KAAK,CAAC,SAAS,KAAK,MAAM,GAAG,KAAK,GAAG,KAAK,CAAC,SAAU;MAChE,OAAO,EAAE,KAAK;MACd,cAAc,EAAE,KAAK;MACrB,SAAS,EAAE,IAAI,cAAA,CAAA,QAAQ,CAAC,KAAK,CAAC,CAAC;KAChC;IACD,MAAK,mBAAmB,EAAE;IAAC;EAC7B;EAAC;IAAA;IAAA,OAED,6BAAiB;MACf,IAAI,CAAC,aAAa,GAAG,cAAA,CAAA,UAAU,CAAC,gBAAgB,CAC9C,QAAQ,EACR,IAAI,CAAC,mBAAmB,CACzB;IACH;EAAC;IAAA;IAAA,OAED,gCAAoB;;MAClB,CAAA,EAAA,GAAA,IAAI,CAAC,aAAa,MAAA,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAE,MAAM,EAAE;IAC9B;EAAC;IAAA;IAAA,OA6DD,0CAAiC,SAAuB,EAAA;MAAA;MACtD,IAAM,aAAa,GAAG,SAAS,CAAC,OAAO;MACvC,kBAA2C,IAAI,CAAC,KAAK;QAA7C,OAAO,eAAP,OAAO;QAAE,QAAQ,eAAR,QAAQ;QAAE,WAAW,eAAX,WAAW;MAEtC,IAAI,aAAa,KAAK,OAAO,EAAE;QAC7B,IAAI,aAAa,EAAE;UAGjB,IAAI,CAAC,QAAQ,CAAC;YACZ,WAAW,EAAE;cAAE,KAAK,EAAE,CAAC;cAAE,MAAM,EAAE;YAAC,CAAE;YACpC,cAAc,EAAE,IAAI;YACpB,OAAO,EAAE;WACV,CAAC;SACH,MAAM;UACL,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC;QAC3B;OACF,MAAM,IACL,aAAa,KACZ,QAAQ,KAAK,SAAS,CAAC,QAAQ,IAAI,WAAW,KAAK,SAAS,CAAC,WAAW,CAAC,EAC1E;QACA,IAAM,IAAI,GAAG,IAAI,CAAC,eAAe,CAAC,SAAS,EAAE,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC;QAEpE,IAAM,cAAc,GAAG,IAAI,CAAC,KAAK,CAAC,cAAc;QAChD,IAAI,CAAC,QAAQ,CAAA,MAAA,CAAA,MAAA,CAAA,CAAA,CAAA,EAAM,IAAI,CAAA,EAAI,YAAK;UAG9B,IAAI,cAAc,EAAE;YAClB,MAAI,CAAC,cAAc,CAAC,IAAI,CAAC;UAC1B;QACH,CAAC,CAAC;MACH;IACH;EAAC;IAAA;IAAA,OAwGD,kBAAM;MACJ,IAAQ,OAAO,GAAK,IAAI,CAAC,KAAK,CAAtB,OAAO;MACf,mBAAsD,IAAI,CAAC,KAAK;QAAxD,OAAO,gBAAP,OAAO;QAAE,SAAS,gBAAT,SAAS;QAAE,qBAAqB,gBAArB,qBAAqB;MACjD,IAAM,cAAc,GAAG,IAAI,CAAC,aAAa,EAAE;MAC3C,IAAM,oBAAoB,GAAG,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,KAAK;MACzD,OACE,qBAAC,cAAA,CAAA,KAAK;QACJ,WAAW;QACX,OAAO,EAAE,OAAQ;QACjB,cAAc,EAAE,OAAQ;QACxB,SAAS,EAAE,SAAU;QACrB,qBAAqB,EAAE,qBAAsB;QAC7C,mBAAmB,EAAE,IAAI,CAAC,mBAAoB;QAAA,UAC9C,sBAAC,cAAA,CAAA,IAAI;UACH,KAAK,EAAE,CACL,MAAM,CAAC,SAAS,EAChB,CAAC,CAAC,oBAAoB,IAAI,MAAM,CAAC,gBAAgB,CACjD;UAAA,WACF,qBAAC,cAAA,CAAA,wBAAwB;YAAC,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC,OAAQ;YAAA,UACpD,qBAAC,cAAA,CAAA,QAAQ,CAAC,IAAI;cAAC,KAAK,EAAE,cAAc,CAAC;YAAW;UAClD,EACA,EAAA,sBAAC,cAAA,CAAA,QAAQ,CAAC,IAAI;YAAC,KAAK,EAAE,cAAc,CAAC,OAAQ;YAAA,WAC3C,qBAAC,cAAA,CAAA,QAAQ,CAAC,IAAI;cACZ,QAAQ,EAAE,IAAI,CAAC,cAAe;cAC9B,KAAK,EAAE,cAAc,CAAC,OAAQ;cAAA,UAC7B,IAAI,CAAC,KAAK,CAAC;YAAQ,EAEtB,EAAA,qBAAC,cAAA,CAAA,QAAQ,CAAC,IAAI;cAAC,KAAK,EAAE,cAAc,CAAC;YAAM,EAC7C;UAAA,EACF;QAAA;MACF,EAAQ;IAEZ;EAAC;EAAA;AAAA,EA3S0B,KAAK,CAAC,aAAyC;AAA5E,OAAA,CAAA,OAAA,GAAA,OAAA;AACS,OAAA,CAAA,SAAS,GAAG;EACjB,OAAO,EAAE,SAAS,CAAC,IAAI;EACvB,OAAO,EAAE,SAAS,CAAC,IAAI;EACvB,SAAS,EAAE,SAAS,CAAC,IAAI;EACzB,SAAS,EAAE,SAAS,CAAC,KAAK,CAAC;IACzB,CAAC,EAAE,SAAS,CAAC,MAAM;IACnB,CAAC,EAAE,SAAS,CAAC;GACd,CAAC;EACF,SAAS,EAAE,SAAS,CAAC,KAAK,CAAC,CAAC,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,QAAQ,EAAE,MAAM,CAAC,CAAC;EACtE,QAAQ,EAAE,SAAS,CAAC,KAAK,CAAC;IACxB,CAAC,EAAE,SAAS,CAAC,MAAM;IACnB,CAAC,EAAE,SAAS,CAAC,MAAM;IACnB,KAAK,EAAE,SAAS,CAAC,MAAM;IACvB,MAAM,EAAE,SAAS,CAAC;GACnB,CAAC;EACF,WAAW,EAAE,SAAS,CAAC,KAAK,CAAC;IAC3B,CAAC,EAAE,SAAS,CAAC,MAAM;IACnB,CAAC,EAAE,SAAS,CAAC,MAAM;IACnB,KAAK,EAAE,SAAS,CAAC,MAAM;IACvB,MAAM,EAAE,SAAS,CAAC;GACnB,CAAC;EACF,eAAe,EAAE,SAAS,CAAC,GAAG;EAC9B,UAAU,EAAE,SAAS,CAAC,GAAG;EACzB,YAAY,EAAE,SAAS,CAAC,GAAG;EAC3B,YAAY,EAAE,SAAS,CAAC,GAAG;EAC3B,QAAQ,EAAE,SAAS,CAAC,MAAM;EAC1B,MAAM,EAAE,SAAS,CAAC;CACnB;AAEM,OAAA,CAAA,YAAY,GAA0B;EAC3C,OAAO,EAAE,KAAK;EACd,OAAO,EAAE,mBAAK,CAAE,CAAC;EACjB,SAAS,EAAE,qBAAK,CAAE,CAAC;EACnB,SAAS,EAAE;IAAE,KAAK,EAAE,EAAE;IAAE,MAAM,EAAE;EAAC,CAAE;EACnC,SAAS,EAAE,MAAM;EACjB,QAAQ,EAAE,GAAG;EACb,MAAM,EAAE,gBAAC,IAAI;IAAA,OACX,IAAI,GAAG,cAAA,CAAA,MAAM,CAAC,GAAG,CAAC,cAAA,CAAA,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,GAAG,cAAA,CAAA,MAAM,CAAC,KAAK,CAAC,cAAA,CAAA,MAAM,CAAC,IAAI,CAAC;EAAA;EACrE,eAAe,EAAE,KAAK;EACtB,kBAAkB,EAAE;CACrB;AAEM,OAAA,CAAA,WAAW,GAAG,SAAS","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Popover = void 0;\nconst debounce_1 = __importDefault(require(\"lodash/debounce\"));\nconst PropTypes = __importStar(require(\"prop-types\"));\nconst React = __importStar(require(\"react\"));\nconst react_native_1 = require(\"react-native\");\nconst PopoverGeometry_1 = require(\"./PopoverGeometry\");\nconst styles = react_native_1.StyleSheet.create({\n    container: Object.assign(Object.assign({}, react_native_1.StyleSheet.absoluteFillObject), { opacity: 0, backgroundColor: 'transparent' }),\n    containerVisible: {\n        opacity: 1,\n    },\n    background: Object.assign(Object.assign({}, react_native_1.StyleSheet.absoluteFillObject), { backgroundColor: 'rgba(0,0,0,0.5)' }),\n    popover: Object.assign(Object.assign({}, react_native_1.Platform.select({\n        ios: {\n            shadowColor: 'black',\n            shadowOffset: { width: 0, height: 2 },\n            shadowRadius: 2,\n            shadowOpacity: 0.4,\n            backgroundColor: 'transparent',\n        },\n    })), { position: 'absolute' }),\n    content: {\n        flexDirection: 'column',\n        position: 'absolute',\n        backgroundColor: '#f2f2f2',\n        padding: 8,\n    },\n    arrow: {\n        position: 'absolute',\n        borderTopColor: '#f2f2f2',\n        borderRightColor: 'transparent',\n        borderBottomColor: 'transparent',\n        borderLeftColor: 'transparent',\n    },\n});\nconst ARROW_DEG = {\n    bottom: '-180deg',\n    start: react_native_1.I18nManager.isRTL ? '90deg' : '-90deg',\n    end: react_native_1.I18nManager.isRTL ? '-90deg' : '90deg',\n    top: '0deg',\n};\nclass Popover extends React.PureComponent {\n    constructor(props) {\n        super(props);\n        this.computeGeometry = (props, contentSize) => (0, PopoverGeometry_1.computeGeometry)(contentSize || this.state.contentSize, props.placement, props.fromRect, props.displayArea || this.defaultDisplayArea, props.arrowSize);\n        this.onOrientationChange = () => {\n            var _a;\n            const dimensions = react_native_1.Dimensions.get('window');\n            this.defaultDisplayArea = {\n                x: 10,\n                y: 10,\n                width: dimensions.width - 20,\n                height: dimensions.height -\n                    20 -\n                    (this.props.calculateStatusBar ? (_a = react_native_1.StatusBar.currentHeight) !== null && _a !== void 0 ? _a : 0 : 0),\n            };\n        };\n        this.updateState = (0, debounce_1.default)(this.setState, 100);\n        this.measureContent = ({ nativeEvent: { layout: { width, height }, }, }) => {\n            if (width && height) {\n                const contentSize = { width, height };\n                const geom = this.computeGeometry(this.props, contentSize);\n                const isAwaitingShow = this.state.isAwaitingShow;\n                this.updateState(Object.assign(Object.assign({}, geom), { contentSize }), () => {\n                    if (isAwaitingShow) {\n                        this.startAnimation(true);\n                    }\n                });\n            }\n        };\n        this.getTranslateOrigin = () => {\n            const { contentSize, origin, anchor } = this.state;\n            const popoverCenter = {\n                x: origin.x + contentSize.width / 2,\n                y: origin.y + contentSize.height / 2,\n            };\n            return { x: anchor.x - popoverCenter.x, y: anchor.y - popoverCenter.y };\n        };\n        this.startAnimation = (show) => {\n            const doneCallback = show ? undefined : this.onHidden;\n            react_native_1.Animated.timing(this.state.animation, {\n                toValue: show ? 1 : 0,\n                duration: this.props.duration,\n                easing: this.props.easing(show),\n                useNativeDriver: !!this.props.useNativeDriver,\n            }).start(doneCallback);\n        };\n        this.onHidden = () => this.setState({ visible: false, isAwaitingShow: false });\n        this.computeStyles = () => {\n            const { animation, anchor, origin } = this.state;\n            const translateOrigin = this.getTranslateOrigin();\n            const arrowSize = this.props.arrowSize;\n            const width = arrowSize.width + 2;\n            const height = arrowSize.height * 2 + 2;\n            return {\n                background: [\n                    styles.background,\n                    this.props.backgroundStyle,\n                    {\n                        opacity: animation.interpolate({\n                            inputRange: [0, 1],\n                            outputRange: [0, 1],\n                            extrapolate: 'clamp',\n                        }),\n                    },\n                ],\n                arrow: [\n                    styles.arrow,\n                    this.props.arrowStyle,\n                    {\n                        width,\n                        height,\n                        borderTopWidth: height / 2,\n                        left: anchor.x - origin.x - width / 2,\n                        top: anchor.y - origin.y - height / 2,\n                        borderEndWidth: width / 2,\n                        borderBottomWidth: height / 2,\n                        borderStartWidth: width / 2,\n                        transform: [\n                            {\n                                rotate: animation.interpolate({\n                                    inputRange: [0, 1],\n                                    outputRange: [\n                                        ARROW_DEG[this.state.placement],\n                                        ARROW_DEG[this.state.placement],\n                                    ],\n                                    extrapolate: 'clamp',\n                                }),\n                            },\n                            {\n                                scale: animation.interpolate({\n                                    inputRange: [0, 1],\n                                    outputRange: [0, 1],\n                                    extrapolate: 'clamp',\n                                }),\n                            },\n                        ],\n                    },\n                ],\n                popover: [\n                    styles.popover,\n                    this.props.popoverStyle,\n                    { top: origin.y, left: origin.x },\n                ],\n                content: [\n                    styles.content,\n                    this.props.contentStyle,\n                    {\n                        transform: [\n                            {\n                                translateX: animation.interpolate({\n                                    inputRange: [0, 1],\n                                    outputRange: [translateOrigin.x, 0],\n                                    extrapolate: 'clamp',\n                                }),\n                            },\n                            {\n                                translateY: animation.interpolate({\n                                    inputRange: [0, 1],\n                                    outputRange: [translateOrigin.y, 0],\n                                    extrapolate: 'clamp',\n                                }),\n                            },\n                            { scale: animation },\n                        ],\n                    },\n                ],\n            };\n        };\n        this.state = {\n            contentSize: { width: 0, height: 0 },\n            anchor: { x: 0, y: 0 },\n            origin: { x: 0, y: 0 },\n            placement: props.placement === 'auto' ? 'top' : props.placement,\n            visible: false,\n            isAwaitingShow: false,\n            animation: new react_native_1.Animated.Value(0),\n        };\n        this.onOrientationChange();\n    }\n    componentDidMount() {\n        this.dimensionsSub = react_native_1.Dimensions.addEventListener('change', this.onOrientationChange);\n    }\n    componentWillUnmount() {\n        var _a;\n        (_a = this.dimensionsSub) === null || _a === void 0 ? void 0 : _a.remove();\n    }\n    UNSAFE_componentWillReceiveProps(nextProps) {\n        const willBeVisible = nextProps.visible;\n        const { visible, fromRect, displayArea } = this.props;\n        if (willBeVisible !== visible) {\n            if (willBeVisible) {\n                this.setState({\n                    contentSize: { width: 0, height: 0 },\n                    isAwaitingShow: true,\n                    visible: true,\n                });\n            }\n            else {\n                this.startAnimation(false);\n            }\n        }\n        else if (willBeVisible &&\n            (fromRect !== nextProps.fromRect || displayArea !== nextProps.displayArea)) {\n            const geom = this.computeGeometry(nextProps, this.state.contentSize);\n            const isAwaitingShow = this.state.isAwaitingShow;\n            this.setState(Object.assign({}, geom), () => {\n                if (isAwaitingShow) {\n                    this.startAnimation(true);\n                }\n            });\n        }\n    }\n    render() {\n        const { visible } = this.state;\n        const { onClose, onDismiss, supportedOrientations } = this.props;\n        const computedStyles = this.computeStyles();\n        const contentSizeAvailable = this.state.contentSize.width;\n        return (<react_native_1.Modal transparent visible={visible} onRequestClose={onClose} onDismiss={onDismiss} supportedOrientations={supportedOrientations} onOrientationChange={this.onOrientationChange}>\n        <react_native_1.View style={[\n                styles.container,\n                !!contentSizeAvailable && styles.containerVisible,\n            ]}>\n          <react_native_1.TouchableWithoutFeedback onPress={this.props.onClose}>\n            <react_native_1.Animated.View style={computedStyles.background}/>\n          </react_native_1.TouchableWithoutFeedback>\n          <react_native_1.Animated.View style={computedStyles.popover}>\n            <react_native_1.Animated.View onLayout={this.measureContent} style={computedStyles.content}>\n              {this.props.children}\n            </react_native_1.Animated.View>\n            <react_native_1.Animated.View style={computedStyles.arrow}/>\n          </react_native_1.Animated.View>\n        </react_native_1.View>\n      </react_native_1.Modal>);\n    }\n}\nexports.Popover = Popover;\nPopover.propTypes = {\n    visible: PropTypes.bool,\n    onClose: PropTypes.func,\n    onDismiss: PropTypes.func,\n    arrowSize: PropTypes.shape({\n        x: PropTypes.number,\n        y: PropTypes.number,\n    }),\n    placement: PropTypes.oneOf(['left', 'top', 'right', 'bottom', 'auto']),\n    fromRect: PropTypes.shape({\n        x: PropTypes.number,\n        y: PropTypes.number,\n        width: PropTypes.number,\n        height: PropTypes.number,\n    }),\n    displayArea: PropTypes.shape({\n        x: PropTypes.number,\n        y: PropTypes.number,\n        width: PropTypes.number,\n        height: PropTypes.number,\n    }),\n    backgroundStyle: PropTypes.any,\n    arrowStyle: PropTypes.any,\n    popoverStyle: PropTypes.any,\n    contentStyle: PropTypes.any,\n    duration: PropTypes.number,\n    easing: PropTypes.func,\n};\nPopover.defaultProps = {\n    visible: false,\n    onClose: () => { },\n    onDismiss: () => { },\n    arrowSize: { width: 16, height: 8 },\n    placement: 'auto',\n    duration: 300,\n    easing: (show) => show ? react_native_1.Easing.out(react_native_1.Easing.back(1.70158)) : react_native_1.Easing.inOut(react_native_1.Easing.quad),\n    useNativeDriver: false,\n    calculateStatusBar: false,\n};\nPopover.displayName = 'Popover';\n//# sourceMappingURL=Popover.js.map"]},"metadata":{},"sourceType":"script"}