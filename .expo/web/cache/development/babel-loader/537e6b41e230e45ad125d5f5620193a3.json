{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nexport default function (url) {\n  var body = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  var _ref = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n    _ref$method = _ref.method,\n    method = _ref$method === void 0 ? 'POST' : _ref$method,\n    _ref$headers = _ref.headers,\n    headers = _ref$headers === void 0 ? {} : _ref$headers;\n  return new Promise(function (rs, rj) {\n    try {\n      var options = {\n        method: method,\n        headers: _objectSpread({\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n        }, headers)\n      };\n      if (body) {\n        if (method == 'GET') {\n          if (!url.includes(\"?\")) {\n            url += \"?\";\n          }\n          for (var key in body) {\n            url += \"&\" + key + \"=\" + body[key];\n          }\n        } else {\n          options.body = JSON.stringify(body);\n        }\n      }\n      var showLog = true;\n      if (showLog) {\n        console.log(\"------REQUEST START-------\");\n        console.log(\"url\", url);\n        console.log(\"method\", method);\n        console.log(\"headers\", headers);\n        console.log(\"body\", body);\n        console.log(\"------REQUEST END-------\");\n      }\n      fetch(url, options).then(function (response) {\n        if (response.status === 200) {\n          return response.json();\n        } else {\n          throw new Error('Something went wrong on API server!');\n        }\n      }).then(function (response) {\n        if (showLog) {\n          console.log(\"------RESPONSE START-------\");\n          console.log(\"response\", response);\n          console.log(\"------RESPONSE END-------\");\n        }\n        if (method == \"GET\") {\n          rs(response);\n        } else {\n          if (response.code == 0) {\n            rs(response.data);\n          }\n        }\n      });\n    } catch (e) {\n      rj(e);\n      console.log(e);\n    }\n  });\n}","map":{"version":3,"names":["url","body","method","headers","Promise","rs","rj","options","Accept","includes","key","JSON","stringify","showLog","console","log","fetch","then","response","status","json","Error","code","data","e"],"sources":["/Users/yori/Documents/project/gucci/utils/fetch.ts"],"sourcesContent":["import { useFonts } from \"expo-font\";\n\nexport default function (url, body = null, {\n  method = 'POST',\n  headers = {}\n} = {}){\n  return new Promise((rs,rj)=>{\n    try{\n      \n      let options = {\n        method,\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json',\n          ...headers\n        }\n      }\n    \n      if(body){\n        if(method == 'GET'){\n          if(!url.includes(\"?\")){\n            url += \"?\"\n          }\n\n          for(var key in body){\n            url += `&${key}=${body[key]}`;\n          }\n        }else{\n          options.body = JSON.stringify(body)\n        }\n      }\n\n      const showLog = true;\n\n      if(showLog){\n        console.log(\"------REQUEST START-------\");\n        console.log(\"url\",url);\n        console.log(\"method\",method);\n        console.log(\"headers\",headers);\n        console.log(\"body\",body);\n        console.log(\"------REQUEST END-------\");\n      }\n\n      fetch(url, options)\n      .then(response=>{\n        if (response.status === 200) {\n          return response.json();\n        } else {\n          throw new Error('Something went wrong on API server!');\n        }\n      })\n      .then(response=>{\n        if(showLog){\n          console.log(\"------RESPONSE START-------\");\n          console.log(\"response\",response);\n          console.log(\"------RESPONSE END-------\");\n        }\n\n        if(method == \"GET\"){\n          rs(response);\n        }else{\n          if(response.code == 0){\n            rs(response.data);\n          }\n        }\n        \n      });\n      \n    }catch(e){\n      rj(e);\n      console.log(e)\n    }\n  })\n}"],"mappings":";;;AAEA,eAAe,UAAUA,GAAG,EAGrB;EAAA,IAHuBC,IAAI,uEAAG,IAAI;EAAA,+EAGrC,CAAC,CAAC;IAAA,mBAFJC,MAAM;IAANA,MAAM,4BAAG,MAAM;IAAA,oBACfC,OAAO;IAAPA,OAAO,6BAAG,CAAC,CAAC;EAEZ,OAAO,IAAIC,OAAO,CAAC,UAACC,EAAE,EAACC,EAAE,EAAG;IAC1B,IAAG;MAED,IAAIC,OAAO,GAAG;QACZL,MAAM,EAANA,MAAM;QACNC,OAAO;UACLK,MAAM,EAAE,kBAAkB;UAC1B,cAAc,EAAE;QAAkB,GAC/BL,OAAO;MAEd,CAAC;MAED,IAAGF,IAAI,EAAC;QACN,IAAGC,MAAM,IAAI,KAAK,EAAC;UACjB,IAAG,CAACF,GAAG,CAACS,QAAQ,CAAC,GAAG,CAAC,EAAC;YACpBT,GAAG,IAAI,GAAG;UACZ;UAEA,KAAI,IAAIU,GAAG,IAAIT,IAAI,EAAC;YAClBD,GAAG,UAAQU,GAAG,SAAIT,IAAI,CAACS,GAAG,CAAG;UAC/B;QACF,CAAC,MAAI;UACHH,OAAO,CAACN,IAAI,GAAGU,IAAI,CAACC,SAAS,CAACX,IAAI,CAAC;QACrC;MACF;MAEA,IAAMY,OAAO,GAAG,IAAI;MAEpB,IAAGA,OAAO,EAAC;QACTC,OAAO,CAACC,GAAG,CAAC,4BAA4B,CAAC;QACzCD,OAAO,CAACC,GAAG,CAAC,KAAK,EAACf,GAAG,CAAC;QACtBc,OAAO,CAACC,GAAG,CAAC,QAAQ,EAACb,MAAM,CAAC;QAC5BY,OAAO,CAACC,GAAG,CAAC,SAAS,EAACZ,OAAO,CAAC;QAC9BW,OAAO,CAACC,GAAG,CAAC,MAAM,EAACd,IAAI,CAAC;QACxBa,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAC;MACzC;MAEAC,KAAK,CAAChB,GAAG,EAAEO,OAAO,CAAC,CAClBU,IAAI,CAAC,UAAAC,QAAQ,EAAE;QACd,IAAIA,QAAQ,CAACC,MAAM,KAAK,GAAG,EAAE;UAC3B,OAAOD,QAAQ,CAACE,IAAI,EAAE;QACxB,CAAC,MAAM;UACL,MAAM,IAAIC,KAAK,CAAC,qCAAqC,CAAC;QACxD;MACF,CAAC,CAAC,CACDJ,IAAI,CAAC,UAAAC,QAAQ,EAAE;QACd,IAAGL,OAAO,EAAC;UACTC,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAC;UAC1CD,OAAO,CAACC,GAAG,CAAC,UAAU,EAACG,QAAQ,CAAC;UAChCJ,OAAO,CAACC,GAAG,CAAC,2BAA2B,CAAC;QAC1C;QAEA,IAAGb,MAAM,IAAI,KAAK,EAAC;UACjBG,EAAE,CAACa,QAAQ,CAAC;QACd,CAAC,MAAI;UACH,IAAGA,QAAQ,CAACI,IAAI,IAAI,CAAC,EAAC;YACpBjB,EAAE,CAACa,QAAQ,CAACK,IAAI,CAAC;UACnB;QACF;MAEF,CAAC,CAAC;IAEJ,CAAC,QAAMC,CAAC,EAAC;MACPlB,EAAE,CAACkB,CAAC,CAAC;MACLV,OAAO,CAACC,GAAG,CAACS,CAAC,CAAC;IAChB;EACF,CAAC,CAAC;AACJ"},"metadata":{},"sourceType":"module"}