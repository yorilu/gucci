{"ast":null,"code":"\"use strict\";\n\nvar _reactJsxRuntime = require(\"react/jsx-runtime\");\nvar _classCallCheck = require(\"@babel/runtime/helpers/classCallCheck\");\nvar _createClass = require(\"@babel/runtime/helpers/createClass\");\nvar _inherits = require(\"@babel/runtime/helpers/inherits\");\nvar _possibleConstructorReturn = require(\"@babel/runtime/helpers/possibleConstructorReturn\");\nvar _getPrototypeOf = require(\"@babel/runtime/helpers/getPrototypeOf\");\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function get() {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PopoverTouchable = void 0;\nvar PropTypes = __importStar(require(\"prop-types\"));\nvar React = __importStar(require(\"react\"));\nvar react_native_1 = require(\"react-native-web/dist/index\");\nvar PopoverTouchable = function (_React$PureComponent) {\n  _inherits(PopoverTouchable, _React$PureComponent);\n  var _super = _createSuper(PopoverTouchable);\n  function PopoverTouchable(props) {\n    var _this;\n    _classCallCheck(this, PopoverTouchable);\n    _this = _super.call(this, props);\n    _this.onOrientationChange = function () {\n      if (_this.state.showPopover) {\n        requestAnimationFrame(_this.onPress);\n      }\n    };\n    _this.touchable = null;\n    _this.setRef = function (ref) {\n      _this.touchable = ref;\n    };\n    _this.onPress = function () {\n      var handle = (0, react_native_1.findNodeHandle)(_this.touchable);\n      if (handle) {\n        react_native_1.NativeModules.UIManager.measure(handle, _this.onTouchableMeasured);\n      }\n    };\n    _this.onTouchableMeasured = function (x0, y0, width, height, x, y) {\n      _this.setState({\n        showPopover: true,\n        popoverAnchor: {\n          x: x,\n          y: y,\n          width: width,\n          height: height\n        }\n      }, function () {\n        if (_this.props.onPopoverDisplayed) {\n          _this.props.onPopoverDisplayed();\n        }\n      });\n    };\n    _this.onClosePopover = function () {\n      return _this.setState({\n        showPopover: false\n      });\n    };\n    _this.state = {\n      showPopover: false,\n      popoverAnchor: {\n        x: 0,\n        y: 0,\n        width: 0,\n        height: 0\n      }\n    };\n    console.warn('PopoverTouchable is deprecated, please use PopoverController instead');\n    return _this;\n  }\n  _createClass(PopoverTouchable, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.dimensionsSub = react_native_1.Dimensions.addEventListener('change', this.onOrientationChange);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var _a;\n      (_a = this.dimensionsSub) === null || _a === void 0 ? void 0 : _a.remove();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var children = React.Children.toArray(this.props.children);\n      if (children.length !== 2 || children[1] instanceof Number || children[1] instanceof String || children[1].type.displayName !== 'Popover') {\n        throw new Error('Popover touchable must have two children and the second one must be Popover');\n      }\n      return _reactJsxRuntime.jsxs(React.Fragment, {\n        children: [React.cloneElement(children[0], {\n          ref: this.setRef,\n          onPress: this.onPress\n        }), React.cloneElement(children[1], {\n          visible: this.state.showPopover,\n          onClose: this.onClosePopover,\n          fromRect: this.state.popoverAnchor\n        })]\n      });\n    }\n  }]);\n  return PopoverTouchable;\n}(React.PureComponent);\nexports.PopoverTouchable = PopoverTouchable;\nPopoverTouchable.propTypes = {\n  onPopoverDisplayed: PropTypes.func\n};","map":{"version":3,"sources":["../src/PopoverTouchable.tsx"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAA,SAAA,GAAA,YAAA,CAAA,OAAA,CAAA,YAAA,CAAA,CAAA;AACA,IAAA,KAAA,GAAA,YAAA,CAAA,OAAA,CAAA,OAAA,CAAA,CAAA;AAA+B;AAAA,IAoBlB,gBAAiB;EAAA;EAAA;EAO5B,0BAAY,KAAY,EAAA;IAAA;IAAA;IACtB,0BAAM,KAAK;IAqBL,MAAA,mBAAmB,GAAG,YAAK;MACjC,IAAI,MAAK,KAAK,CAAC,WAAW,EAAE;QAE1B,qBAAqB,CAAC,MAAK,OAAO,CAAC;MACpC;IACH,CAAC;IAEO,MAAA,SAAS,GAAQ,IAAI;IAErB,MAAA,MAAM,GAAG,UAAC,GAAQ,EAAI;MAC5B,MAAK,SAAS,GAAG,GAAG;IACtB,CAAC;IAEO,MAAA,OAAO,GAAG,YAAK;MACrB,IAAM,MAAM,GAAG,CAAA,CAAA,EAAA,cAAA,CAAA,cAAc,EAAC,MAAK,SAAS,CAAC;MAC7C,IAAI,MAAM,EAAE;QACV,cAAA,CAAA,aAAa,CAAC,SAAS,CAAC,OAAO,CAAC,MAAM,EAAE,MAAK,mBAAmB,CAAC;MAClE;IACH,CAAC;IAEO,MAAA,mBAAmB,GAA6B,UACtD,EAAE,EACF,EAAE,EACF,KAAK,EACL,MAAM,EACN,CAAC,EACD,CAAC,EACC;MACF,MAAK,QAAQ,CACX;QACE,WAAW,EAAE,IAAI;QACjB,aAAa,EAAE;UAAE,CAAC,EAAD,CAAC;UAAE,CAAC,EAAD,CAAC;UAAE,KAAK,EAAL,KAAK;UAAE,MAAM,EAAN;QAAM;OACrC,EACD,YAAK;QACH,IAAI,MAAK,KAAK,CAAC,kBAAkB,EAAE;UACjC,MAAK,KAAK,CAAC,kBAAkB,EAAE;QAChC;MACH,CAAC,CACF;IACH,CAAC;IAEO,MAAA,cAAc,GAAG;MAAA,OAAM,MAAK,QAAQ,CAAC;QAAE,WAAW,EAAE;MAAK,CAAE,CAAC;IAAA;IA7DlE,MAAK,KAAK,GAAG;MACX,WAAW,EAAE,KAAK;MAClB,aAAa,EAAE;QAAE,CAAC,EAAE,CAAC;QAAE,CAAC,EAAE,CAAC;QAAE,KAAK,EAAE,CAAC;QAAE,MAAM,EAAE;MAAC;KACjD;IACD,OAAO,CAAC,IAAI,CACV,sEAAsE,CACvE;IAAC;EACJ;EAAC;IAAA;IAAA,OAED,6BAAiB;MACf,IAAI,CAAC,aAAa,GAAG,cAAA,CAAA,UAAU,CAAC,gBAAgB,CAC9C,QAAQ,EACR,IAAI,CAAC,mBAAmB,CACzB;IACH;EAAC;IAAA;IAAA,OAED,gCAAoB;;MAClB,CAAA,EAAA,GAAA,IAAI,CAAC,aAAa,MAAA,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAE,MAAM,EAAE;IAC9B;EAAC;IAAA;IAAA,OA6CD,kBAAM;MACJ,IAAM,QAAQ,GAAG,KAAK,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC;MAC5D,IACE,QAAQ,CAAC,MAAM,KAAK,CAAC,IACrB,QAAQ,CAAC,CAAC,CAAC,YAAY,MAAM,IAC7B,QAAQ,CAAC,CAAC,CAAC,YAAY,MAAM,IAC5B,QAAQ,CAAC,CAAC,CAAS,CAAC,IAAI,CAAC,WAAW,KAAK,SAAS,EACnD;QACA,MAAM,IAAI,KAAK,CACb,6EAA6E,CAC9E;MACF;MACD,OACE,sBAAC,KAAK,CAAC,QAAQ;QAAA,WACZ,KAAK,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC,CAA4B,EAAE;UAC1D,GAAG,EAAE,IAAI,CAAC,MAAM;UAChB,OAAO,EAAE,IAAI,CAAC;SACf,CAAC,EACD,KAAK,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC,CAA4B,EAAE;UAC1D,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC,WAAW;UAC/B,OAAO,EAAE,IAAI,CAAC,cAAc;UAC5B,QAAQ,EAAE,IAAI,CAAC,KAAK,CAAC;SACtB,CAAC;MAAA,EACa;IAErB;EAAC;EAAA;AAAA,EAjGmC,KAAK,CAAC,aAA2B;AAAvE,OAAA,CAAA,gBAAA,GAAA,gBAAA;AACS,gBAAA,CAAA,SAAS,GAAG;EACjB,kBAAkB,EAAE,SAAS,CAAC;CAC/B","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PopoverTouchable = void 0;\nconst PropTypes = __importStar(require(\"prop-types\"));\nconst React = __importStar(require(\"react\"));\nconst react_native_1 = require(\"react-native\");\nclass PopoverTouchable extends React.PureComponent {\n    constructor(props) {\n        super(props);\n        this.onOrientationChange = () => {\n            if (this.state.showPopover) {\n                requestAnimationFrame(this.onPress);\n            }\n        };\n        this.touchable = null;\n        this.setRef = (ref) => {\n            this.touchable = ref;\n        };\n        this.onPress = () => {\n            const handle = (0, react_native_1.findNodeHandle)(this.touchable);\n            if (handle) {\n                react_native_1.NativeModules.UIManager.measure(handle, this.onTouchableMeasured);\n            }\n        };\n        this.onTouchableMeasured = (x0, y0, width, height, x, y) => {\n            this.setState({\n                showPopover: true,\n                popoverAnchor: { x, y, width, height },\n            }, () => {\n                if (this.props.onPopoverDisplayed) {\n                    this.props.onPopoverDisplayed();\n                }\n            });\n        };\n        this.onClosePopover = () => this.setState({ showPopover: false });\n        this.state = {\n            showPopover: false,\n            popoverAnchor: { x: 0, y: 0, width: 0, height: 0 },\n        };\n        console.warn('PopoverTouchable is deprecated, please use PopoverController instead');\n    }\n    componentDidMount() {\n        this.dimensionsSub = react_native_1.Dimensions.addEventListener('change', this.onOrientationChange);\n    }\n    componentWillUnmount() {\n        var _a;\n        (_a = this.dimensionsSub) === null || _a === void 0 ? void 0 : _a.remove();\n    }\n    render() {\n        const children = React.Children.toArray(this.props.children);\n        if (children.length !== 2 ||\n            children[1] instanceof Number ||\n            children[1] instanceof String ||\n            children[1].type.displayName !== 'Popover') {\n            throw new Error('Popover touchable must have two children and the second one must be Popover');\n        }\n        return (<React.Fragment>\n        {React.cloneElement(children[0], {\n                ref: this.setRef,\n                onPress: this.onPress,\n            })}\n        {React.cloneElement(children[1], {\n                visible: this.state.showPopover,\n                onClose: this.onClosePopover,\n                fromRect: this.state.popoverAnchor,\n            })}\n      </React.Fragment>);\n    }\n}\nexports.PopoverTouchable = PopoverTouchable;\nPopoverTouchable.propTypes = {\n    onPopoverDisplayed: PropTypes.func,\n};\n//# sourceMappingURL=PopoverTouchable.js.map"]},"metadata":{},"sourceType":"script"}